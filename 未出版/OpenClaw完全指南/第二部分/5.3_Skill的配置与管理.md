---
section_id: 5.3
title: Skill的配置与管理
status: draft
target_words: 1500
word_count: 1500
---

# Skill的配置与管理

安装Skill只是第一步，掌握配置和管理技巧，才能让Skills发挥最大效用。

## Skill的目录结构

每个安装的Skill都在独立目录中：

```
~/.openclaw/workspace/skills/
├── weather-assistant/
│   ├── SKILL.md          # 技能定义
│   ├── config.json       # 用户配置
│   ├── index.ts          # 执行脚本
│   ├── package.json      # 依赖信息
│   └── node_modules/     # 依赖包
│
├── github/
│   ├── SKILL.md
│   ├── config.json
│   └── ...
│
└── gmail-manager/
    └── ...
```

## 配置管理

### 查看配置

```bash
# 查看所有已安装Skills的配置
openclaw skills config list

# 查看特定Skill的配置
openclaw skills config show github
```

输出：
```json
{
  "token": "${GITHUB_TOKEN}",
  "defaultBranch": "main",
  "autoFork": false
}
```

### 修改配置

**方式一：命令行**

```bash
openclaw skills config set github defaultBranch develop
```

**方式二：编辑文件**

```bash
code ~/.openclaw/workspace/skills/github/config.json
```

**方式三：Dashboard**

1. 打开 http://127.0.0.1:18789
2. Skills > Installed > github > Settings
3. 修改配置并保存

### 配置优先级

配置的优先级从高到低：

1. **命令行参数** - 一次性使用
2. **config.json** - Skill级别
3. **环境变量** - 全局共享
4. **默认值** - Skill内置

## 环境变量管理

Skills通常需要API Key等敏感信息，使用环境变量是最佳实践。

### 配置方式

```bash
# 编辑环境变量文件
vim ~/.openclaw/env
```

```bash
# ~/.openclaw/env
GITHUB_TOKEN=ghp_xxx
GOOGLE_API_KEY=AIza-xxx
BRAVE_SEARCH_API_KEY=xxx
OPENWEATHER_API_KEY=xxx
```

### 在配置中引用

```json
{
  "token": "${GITHUB_TOKEN}",
  "apiKey": "${GOOGLE_API_KEY}"
}
```

### 生效方式

```bash
openclaw gateway restart
```

## Skill更新

### 检查更新

```bash
# 检查所有Skills的更新
openclaw skills outdated

# 检查特定Skill
openclaw skills outdated github
```

输出：
```
Checking for updates...

github
  当前版本: 1.2.0
  最新版本: 1.3.0
  更新内容:
    - 新增 PR review 功能
    - 修复 Issue 列表排序问题
```

### 更新Skill

```bash
# 更新单个Skill
openclaw skills update github

# 更新所有Skills
openclaw skills update --all
```

### 锁定版本

如果你想锁定特定版本：

```bash
# 安装特定版本
openclaw skills install github@1.2.0

# 锁定不更新
openclaw skills pin github
```

## Skill禁用与启用

### 禁用Skill

临时禁用某个Skill（不卸载）：

```bash
openclaw skills disable github
```

### 启用Skill

```bash
openclaw skills enable github
```

### 查看状态

```bash
openclaw skills list --installed
```

输出：
```
Installed Skills:

✓ weather-assistant (2.1.0) - 活跃
○ github (1.3.0) - 已禁用
✓ gmail-manager (1.0.0) - 活跃
```

## Skill卸载

### 卸载单个Skill

```bash
openclaw skills uninstall github
```

输出：
```
⚠️  确定要卸载 github 吗？
    这将删除所有相关配置。

[y/N] y

✓ 已卸载 github
```

### 保留配置卸载

如果想保留配置：

```bash
openclaw skills uninstall github --keep-config
```

### 清理残留文件

```bash
# 清理未使用的依赖
openclaw skills prune

# 清理所有缓存
openclaw skills clean
```

## Skill调试

### 查看日志

```bash
# 实时查看日志
openclaw skills logs github --follow

# 查看最近日志
openclaw skills logs github --tail 50
```

输出：
```
[2024-01-15 10:30:15] [INFO] GitHub Skill initialized
[2024-01-15 10:30:16] [DEBUG] API call: repos/list
[2024-01-15 10:30:17] [INFO] Found 23 repositories
```

### 调试模式

```bash
# 启用调试模式
openclaw skills debug github

# 测试特定功能
openclaw skills test github --case "list-repos"
```

### 常见问题排查

**问题1：Skill无响应**

```bash
# 检查Skill状态
openclaw skills status github

# 重启Skill
openclaw skills restart github
```

**问题2：配置不生效**

```bash
# 验证配置
openclaw skills config validate github

# 重新加载
openclaw skills reload github
```

**问题3：依赖冲突**

```bash
# 检查依赖
openclaw skills deps github

# 重新安装依赖
cd ~/.openclaw/workspace/skills/github
rm -rf node_modules
npm install
```

## Skill权限管理

### 查看权限

```bash
openclaw skills permissions github
```

输出：
```
github 技能权限:

✓ filesystem.read - 读取文件
✓ network.request - 网络请求
✗ filesystem.write - 写入文件（未授权）
✗ system.exec - 执行命令（未授权）
```

### 修改权限

```bash
# 授予权限
openclaw skills permissions grant github filesystem.write

# 撤销权限
openclaw skills permissions revoke github filesystem.write
```

### 权限配置文件

```json
// ~/.openclaw/workspace/skills/github/permissions.json
{
  "filesystem": {
    "read": true,
    "write": false
  },
  "network": {
    "request": true,
    "domains": ["api.github.com"]
  },
  "system": {
    "exec": false
  }
}
```

## Skill依赖管理

### 查看依赖

```bash
openclaw skills deps github
```

输出：
```
github 依赖:

Production:
├── @octokit/rest@19.0.0
├── dotenv@16.0.0
└── node-fetch@2.6.0

Development:
├── jest@29.0.0
└── typescript@4.9.0
```

### 更新依赖

```bash
# 更新单个依赖
openclaw skills deps update github @octokit/rest

# 更新所有依赖
openclaw skills deps update github --all
```

### 审计依赖

检查依赖的安全问题：

```bash
openclaw skills audit github
```

输出：
```
Scanning dependencies...

⚠️  发现 1 个安全漏洞:

lodash@4.17.15
  严重程度: 高
  漏洞: CVE-2020-8203
  建议: 升级到 4.17.21
```

## 批量管理

### 导出已安装列表

```bash
openclaw skills export > installed-skills.json
```

输出：
```json
{
  "skills": [
    { "name": "weather-assistant", "version": "2.1.0" },
    { "name": "github", "version": "1.3.0" },
    { "name": "gmail-manager", "version": "1.0.0" }
  ]
}
```

### 批量导入

在新机器上恢复：

```bash
openclaw skills import installed-skills.json
```

### 同步配置

如果你有多台机器，可以同步Skills配置：

```bash
# 导出配置
openclaw skills config export > skills-config.json

# 导入配置
openclaw skills config import skills-config.json
```

---

**本节小结**

- Skill配置存储在 `~/.openclaw/workspace/skills/<skill>/config.json`
- 敏感信息使用环境变量，通过 `${VAR}` 引用
- 支持禁用/启用、更新、卸载操作
- 调试时查看日志，启用调试模式
- 权限管理控制Skill能做什么
- 依赖管理确保Skill正常运行
- 支持批量导出/导入，方便迁移
