---
section_id: 9.2
title: 智能日程管理
status: draft
target_words: 1500
word_count: 1620
---

# 智能日程管理

日程管理是生产力工具的核心，但传统的日历应用往往只是被动地记录事件，缺乏主动的智能。OpenClaw 可以帮助我们构建一个智能日程助手，它不仅能自动同步和整理日程，还能主动分析时间使用模式、优化会议安排、智能提醒重要事项，甚至根据你的工作习惯提出效率改进建议。

## 场景介绍

### 日程管理的常见挑战

1. **日程碎片化**：会议、任务、约会分散在不同系统，难以统一视图
2. **冲突检测困难**：手动检查日程冲突耗时且容易遗漏
3. **会议效率低**：缺乏准备时间、会议目的不明确、参会人员不合适
4. **时间黑洞**：不知道时间花在哪里，难以优化
5. **提醒不及时**：错过重要会议或截止日期

### OpenClaw 的解决方案

- **多源同步**：整合日历、邮件、任务管理、项目管理等多个来源的日程
- **智能排程**：根据优先级、精力曲线、会议室可用性自动安排会议
- **会议优化**：自动生成议程、准备材料、记录纪要
- **时间分析**：分析时间使用情况，识别效率瓶颈
- **主动提醒**：根据交通状况、准备需求提前智能提醒

## 实现思路

智能日程管理系统的核心组件包括：

1. **日历连接器**：通过 CalDAV、Google Calendar API 等连接各类日历
2. **事件解析器**：从邮件、消息中提取会议请求和任务
3. **冲突检测器**：自动识别日程冲突并提出解决方案
4. **时间优化器**：分析用户的时间使用模式，提出优化建议
5. **会议助手**：会前准备、会中记录、会后跟进

## 配置步骤

### 第一步：创建日历连接 Skill

```yaml
# ~/.openclaw/skills/calendar/SKILL.md
---
name: calendar-assistant
description: 日程管理助手
commands:
  - name: fetch-events
    description: 获取日历事件
    script: |
      curl -s "https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin={{start_time}}&timeMax={{end_time}}" \
        -H "Authorization: Bearer {{secrets.google_token}}" | \
        jq '.items | map({
          id: .id,
          summary: .summary,
          start: .start.dateTime,
          end: .end.dateTime,
          location: .location,
          attendees: (.attendees // [] | map(.email)),
          description: .description
        })'

  - name: create-event
    description: 创建日历事件
    script: |
      curl -s -X POST \
        "https://www.googleapis.com/calendar/v3/calendars/primary/events" \
        -H "Authorization: Bearer {{secrets.google_token}}" \
        -H "Content-Type: application/json" \
        -d '{
          "summary": "{{title}}",
          "start": {"dateTime": "{{start_time}}", "timeZone": "{{timezone}}"},
          "end": {"dateTime": "{{end_time}}", "timeZone": "{{timezone}}"},
          "location": "{{location}}",
          "attendees": {{attendees | to_json}},
          "description": "{{description}}",
          "reminders": {"useDefault": true}
        }'

  - name: find-free-slots
    description: 查找空闲时间
    script: |
      curl -s -X POST \
        "https://www.googleapis.com/calendar/v3/freeBusy" \
        -H "Authorization: Bearer {{secrets.google_token}}" \
        -H "Content-Type: application/json" \
        -d '{
          "timeMin": "{{start_time}}",
          "timeMax": "{{end_time}}",
          "items": [{"id": "{{calendar_id}}"}]
        }' | jq '.calendars.primary.busy'

  - name: check-conflicts
    description: 检查日程冲突
    script: |
      # 查询指定时间段内的事件
      events=$(curl -s "https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin={{start_time}}&timeMax={{end_time}}" \
        -H "Authorization: Bearer {{secrets.google_token}}")

      # 检查是否有冲突
      conflicts=$(echo $events | jq '[.items[] | select(.start.dateTime < "{{end_time}}" and .end.dateTime > "{{start_time}}")]')

      echo "{\"has_conflict\": $(echo $conflicts | jq 'length > 0'), \"conflicts\": $conflicts}"
```

### 第二步：创建日程分析 Agent

```yaml
# ~/.openclaw/agents/schedule-optimizer.yaml
name: schedule-optimizer
description: 日程优化专家
system_prompt: |
  你是一位专业的时间管理顾问，擅长分析日程安排并提出优化建议。

  分析维度：
  1. 时间分布：会议 vs 深度工作 vs 休息
  2. 精力曲线：高强度任务是否安排在高效时段
  3. 会议效率：会议时长、频率、必要性
  4. 缓冲时间：任务之间是否有足够的切换时间
  5. 工作负载：每日任务量是否合理

  优化建议原则：
  - 保护深度工作时间（建议每天2-4小时）
  - 批量处理同类任务
  - 会议尽量集中在特定时段
  - 预留应急缓冲时间

  输出格式（JSON）：
  {
    "time_distribution": {"meetings": 40, "deep_work": 30, "admin": 20, "break": 10},
    "efficiency_score": 7.5,
    "issues": ["问题1", "问题2"],
    "recommendations": ["建议1", "建议2"],
    "optimized_schedule": [...]
  }
```

### 第三步：编写日程管理工作流

```yaml
# ~/.openclaw/workflows/schedule-manager.lobster
name: schedule-manager
version: "1.0"

triggers:
  - type: schedule
    cron: "0 20 * * *"  # 每晚8点分析次日日程
  - type: webhook
    path: "/calendar/event-created"

steps:
  # 1. 获取明日日程
  - name: fetch_tomorrow
    skill: calendar-assistant
    command: fetch-events
    args:
      start_time: "{{tomorrow_start}}"
      end_time: "{{tomorrow_end}}"

  # 2. 分析日程安排
  - name: analyze_schedule
    agent: schedule-optimizer
    prompt: |
      请分析以下日程安排：
      {{steps.fetch_tomorrow.output}}

      用户工作偏好：
      - 高效时段：{{user.peak_hours}}
      - 深度工作偏好：{{user.deep_work_preferences}}
      - 会议疲劳阈值：{{user.meeting_threshold}}小时/天

      请提供详细的分析和优化建议。

  # 3. 检查冲突
  - name: check_conflicts
    skill: calendar-assistant
    command: check-conflicts
    loop:
      over: "{{steps.fetch_tomorrow.output}}"
    args:
      start_time: "{{item.start}}"
      end_time: "{{item.end}}"

  # 4. 生成会议准备清单
  - name: prepare_meetings
    agent: meeting-assistant
    loop:
      over: "{{steps.fetch_tomorrow.output}}"
      condition: "{{item.attendees | length > 1}}"
    prompt: |
      为以下会议生成准备清单：
      会议：{{item.summary}}
      描述：{{item.description}}
      参会人：{{item.attendees}}

      请提供：
      1. 会议目的和预期产出
      2. 需要准备的材料
      3. 建议讨论的要点
      4. 会前需要确认的事项

  # 5. 发送日程摘要
  - name: send_digest
    skill: notification
    command: send
    args:
      channel: "{{user.preferences.notification_channel}}"
      title: "明日日程预览"
      content: |
        明日共有 {{steps.fetch_tomorrow.output | length}} 个事项

        效率评分：{{steps.analyze_schedule.output.efficiency_score}}/10

        关键会议：
        {{steps.prepare_meetings.output | format_list}}

        优化建议：
        {{steps.analyze_schedule.output.recommendations | format_list}}

  # 6. 创建待办事项
  - name: create_todos
    skill: todo
    command: add
    loop:
      over: "{{steps.prepare_meetings.output}}"
    args:
      title: "准备：{{item.meeting_name}}"
      due_date: "{{item.meeting_start | subtract: '1h'}}"
      checklist: "{{item.preparation_items}}"
```

### 第四步：配置智能排程规则

```yaml
# ~/.openclaw/config.yaml
calendar:
  accounts:
    - type: google
      email: "your.email@gmail.com"
      token: "{{secrets.google_token}}"

  preferences:
    work_hours:
      start: "09:00"
      end: "18:00"
      timezone: "Asia/Shanghai"

    peak_hours:
      - "09:00-11:00"
      - "14:00-16:00"

    deep_work_block:
      duration: "2h"
      preferred_time: "morning"
      protect: true

    meeting_rules:
      max_per_day: 4
      max_duration: "1h"
      buffer_between: "15m"
      no_meeting_blocks:
        - "12:00-14:00"  # 午休时间

    auto_schedule:
      enabled: true
      categories:
        - name: "深度工作"
          priority: 1
          preferred_slots: ["09:00-11:00"]
        - name: "团队会议"
          priority: 2
          preferred_slots: ["10:00-12:00", "14:00-16:00"]
        - name: "1对1"
          priority: 3
          preferred_slots: ["16:00-18:00"]
```

## 实际案例

### 案例一：管理者的日程优化

部门经理老李每天被会议淹没，使用 OpenClaw 优化日程安排：

```yaml
name: manager-schedule-optimizer

triggers:
  - type: schedule
    cron: "0 18 * * 0"  # 每周日晚上6点

steps:
  - name: fetch_week_schedule
    skill: calendar-assistant
    command: fetch-events
    args:
      start_time: "{{next_week_start}}"
      end_time: "{{next_week_end}}"

  - name: analyze_meeting_load
    agent: schedule-optimizer
    prompt: |
      分析下周会议负荷：
      {{steps.fetch_week_schedule.output}}

      请识别：
      1. 可以取消或缩短的会议
      2. 可以合并的类似主题会议
      3. 可以委托给下属的会议
      4. 需要增加准备时间的会议

  - name: suggest_reschedules
    agent: schedule-optimizer
    prompt: |
      基于以下分析，生成具体的改期建议：
      {{steps.analyze_meeting_load.output}}

      为每个建议提供：
      - 原会议信息
      - 建议操作（取消/缩短/改期/委托）
      - 理由
      - 建议的新时间（如适用）

  - name: batch_process
    skill: calendar-assistant
    command: batch-update
    loop:
      over: "{{steps.suggest_reschedules.output}}"
      condition: "{{item.action == 'reschedule'}}"
    args:
      event_id: "{{item.event_id}}"
      new_start: "{{item.suggested_time}}"
      new_end: "{{item.suggested_end}}"

  - name: send_weekly_report
    skill: notification
    command: send-email
    args:
      to: "{{user.email}}"
      subject: "下周日程优化报告"
      body: |
        本周会议统计：
        - 总会议数：{{steps.fetch_week_schedule.output | length}}
        - 总会议时长：{{steps.fetch_week_schedule.output | sum: 'duration'}}小时
        - 平均每日会议：{{steps.fetch_week_schedule.output | avg_per_day}}

        优化建议：
        {{steps.suggest_reschedules.output | format_table}}

        已自动调整：{{steps.batch_process.output | length}}个会议
```

### 案例二：智能会议助手

产品经理小王需要频繁组织和参与会议：

```yaml
name: smart-meeting-assistant

triggers:
  - type: webhook
    path: "/meeting/scheduled"

steps:
  - name: analyze_meeting
    agent: meeting-assistant
    prompt: |
      分析以下会议信息：
      标题：{{input.meeting_title}}
      参会人：{{input.attendees}}
      时长：{{input.duration}}

      请评估：
      1. 会议目的是否明确
      2. 参会人是否必要
      3. 时长是否合理
      4. 建议的议程结构

  - name: generate_agenda
    agent: meeting-assistant
    condition: "{{steps.analyze_meeting.output.needs_agenda}}"
    prompt: |
      为会议生成详细议程：
      主题：{{input.meeting_title}}
      目的：{{steps.analyze_meeting.output.purpose}}
      时长：{{input.duration}}

      要求：
      - 每个议题分配具体时间
      - 标注负责人
      - 明确预期产出

  - name: prepare_materials
    skill: document
    command: gather-materials
    args:
      meeting_topic: "{{input.meeting_title}}"
      attendees: "{{input.attendees}}"

  - name: send_preparation
    skill: notification
    command: send
    args:
      channel: "email"
      to: "{{input.attendees}}"
      subject: "会议准备：{{input.meeting_title}}"
      body: |
        各位好，

        会议：{{input.meeting_title}}
        时间：{{input.meeting_time}}
        地点：{{input.location}}

        议程：
        {{steps.generate_agenda.output}}

        请提前准备：
        {{steps.prepare_materials.output}}

        期待与大家的讨论！

  # 会中记录（通过语音转文字触发）
  - name: take_notes
    trigger:
      type: webhook
      path: "/meeting/start"
    skill: voice
    command: transcribe
    args:
      duration: "{{input.duration}}"

  - name: summarize_meeting
    agent: meeting-assistant
    prompt: |
      基于会议录音生成纪要：
      {{steps.take_notes.output}}

      请提供：
      1. 会议要点
      2. 决议事项
      3. 行动项（负责人+截止日期）
      4. 下次会议安排（如有）

  - name: create_followups
    skill: todo
    command: add
    loop:
      over: "{{steps.summarize_meeting.output.action_items}}"
    args:
      title: "{{item.task}}"
      assignee: "{{item.owner}}"
      due_date: "{{item.deadline}}"

  - name: send_minutes
    skill: notification
    command: send-email
    args:
      to: "{{input.attendees}}"
      subject: "会议纪要：{{input.meeting_title}}"
      body: "{{steps.summarize_meeting.output}}"
```

### 案例三：个人时间追踪与分析

自由职业者小张希望更好地管理自己的时间：

```yaml
name: personal-time-tracker

triggers:
  - type: schedule
    cron: "0 21 * * *"  # 每晚9点

steps:
  - name: fetch_today_events
    skill: calendar-assistant
    command: fetch-events
    args:
      start_time: "{{today_start}}"
      end_time: "{{today_end}}"

  - name: categorize_activities
    agent: time-analyzer
    prompt: |
      分析今日活动：
      {{steps.fetch_today_events.output}}

      请按以下类别分类：
      - 客户工作（可计费）
      - 业务开发
      - 学习提升
      - 行政事务
      - 休息娱乐

  - name: calculate_metrics
    skill: calculator
    command: compute
    args:
      billable_hours: "{{steps.categorize_activities.output.billable | sum: 'duration'}}"
      efficiency: "{{steps.categorize_activities.output.billable | sum: 'duration'}} / 8 * 100"

  - name: generate_insights
    agent: time-analyzer
    prompt: |
      基于本周时间数据生成洞察：
      今日数据：{{steps.categorize_activities.output}}
      本周趋势：{{user.weekly_time_data}}

      请分析：
      1. 时间使用模式
      2. 效率变化趋势
      3. 可优化空间
      4. 明日建议

  - name: send_daily_report
    skill: notification
    command: send
    args:
      channel: "app"
      title: "今日时间报告"
      content: |
        可计费工时：{{steps.calculate_metrics.output.billable_hours}}小时
        效率指数：{{steps.calculate_metrics.output.efficiency}}%

        时间分布：
        {{steps.categorize_activities.output | format_pie_chart}}

        明日建议：
        {{steps.generate_insights.output.tomorrow_suggestions}}
```

## 进阶技巧

### 智能冲突解决

```yaml
- name: resolve_conflict
  agent: schedule-optimizer
  prompt: |
    检测到日程冲突：
    事件A：{{conflict.event_a}}
    事件B：{{conflict.event_b}}

    请分析：
    1. 哪个事件优先级更高
    2. 是否可以改期其中一个
    3. 是否可以委派
    4. 建议的解决方案

- name: propose_alternatives
  skill: calendar-assistant
  command: find-alternatives
  args:
    event: "{{conflict.lower_priority_event}}"
    constraints:
      - "same_attendees"
      - "same_duration"
      - "within_3_days"
```

### 精力管理集成

```yaml
- name: check_energy_level
  skill: wearable
  command: get-energy-score

- name: optimize_for_energy
  agent: schedule-optimizer
  prompt: |
    用户今日精力评分：{{steps.check_energy_level.output.score}}
    今日日程：{{today_schedule}}

    如精力评分低于5分，建议：
    1. 推迟非紧急会议
    2. 将深度工作移至精力较好的时段
    3. 增加休息间隔
```

通过这些配置，OpenClaw 可以成为你的智能日程管家，帮你 reclaim 时间控制权，提升工作效率。
