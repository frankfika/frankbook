---
section_id: 8.2
title: 购物与消费决策
status: draft
target_words: 1500
word_count: 1550
---

# 购物与消费决策

在电商时代，我们面临着海量的商品选择和复杂的价格体系。如何在众多选项中找到最适合自己的产品，如何确保买到真正的低价，如何避免冲动消费——这些都是现代消费者面临的挑战。OpenClaw 可以帮助我们构建一个智能购物助手，实现价格监控、比价分析、购买决策辅助等功能。

## 场景介绍

想象你正在考虑购买一台新相机。传统方式下，你需要：

1. 在多个电商平台搜索，对比价格和配置
2. 查看大量评测文章和视频
3. 关注价格波动，等待最佳购买时机
4. 在论坛和社交媒体上了解真实用户反馈

这个过程耗时耗力，而且容易遗漏重要信息。使用 OpenClaw，你可以：

- **价格监控**：自动追踪商品价格变化，在降价时第一时间通知
- **智能比价**：跨平台比较价格，识别真正的优惠
- **评价聚合**：汇总多平台用户评价，提取关键信息
- **购买建议**：根据你的需求和预算，生成个性化推荐

## 实现思路

智能购物助手的核心功能包括：

1. **价格追踪引擎**：定期抓取商品价格，记录历史价格曲线
2. **比价系统**：对比不同平台的价格、优惠、售后政策
3. **评价分析器**：使用 NLP 技术分析用户评价，提取优缺点
4. **决策助手**：综合考虑价格、评价、需求匹配度给出建议

这些功能可以通过组合使用 Skill、Agent 和 Lobster 工作流来实现。

## 配置步骤

### 第一步：创建价格监控 Skill

```yaml
# ~/.openclaw/skills/shopping/SKILL.md
---
name: shopping-assistant
description: 智能购物助手
commands:
  - name: track-price
    description: 追踪商品价格
    script: |
      # 抓取商品价格
      price_data=$(curl -s "{{product.url}}" | \
        python3 -c "import sys, json, re; html=sys.stdin.read(); price=re.search(r'price.*?([\d.]+)', html); print(json.dumps({'price': float(price.group(1)) if price else None}))")

      # 存储到数据库
      sqlite3 ~/.openclaw/data/prices.db <<EOF
        INSERT INTO price_history (product_id, platform, price, timestamp)
        VALUES ('{{product.id}}', '{{platform}}', $(echo $price_data | jq '.price'), datetime('now'));
      EOF

      echo $price_data

  - name: compare-prices
    description: 跨平台比价
    script: |
      platforms=("jd" "tmall" "amazon" "pdd")
      results=()
      for platform in "${platforms[@]}"; do
        price=$(curl -s "https://api.pricecompare.com/v1/search?query={{product.name}}&platform=$platform" | jq '.price')
        results+=("{\"platform\": \"$platform\", \"price\": $price}")
      done
      echo "[${results[*]}]"

  - name: fetch-reviews
    description: 获取商品评价
    script: |
      curl -s "https://api.reviews.com/v1/product/{{product.id}}/reviews?limit=100" | \
        jq '.reviews | map({rating: .rating, content: .content, helpful: .helpful_count})'
```

### 第二步：创建评价分析 Agent

```yaml
# ~/.openclaw/agents/review-analyzer.yaml
name: review-analyzer
description: 商品评价分析专家
system_prompt: |
  你是一位专业的商品评价分析师，擅长从海量用户评价中提取关键信息。

  分析维度：
  1. 产品质量：做工、耐用性、故障率
  2. 功能表现：是否符合描述、实际使用体验
  3. 性价比：用户认为是否物有所值
  4. 售后服务：客服响应、退换货体验
  5. 适用人群：适合什么类型的用户

  输出要求：
  - 用 bullet points 列出主要优点和缺点
  - 标注每个观点的支持度（高/中/低）
  - 给出购买建议（强烈推荐/推荐/谨慎考虑/不推荐）
  - 控制在500字以内
```

### 第三步：编写购物决策工作流

```yaml
# ~/.openclaw/workflows/shopping-decision.lobster
name: shopping-decision
version: "1.0"

triggers:
  - type: webhook
    path: "/shopping/analyze"
  - type: schedule
    cron: "0 */6 * * *"  # 每6小时检查一次价格

steps:
  # 1. 获取当前价格
  - name: get_current_prices
    skill: shopping-assistant
    command: compare-prices
    args:
      product:
        name: "{{input.product_name}}"
        id: "{{input.product_id}}"

  # 2. 获取历史价格
  - name: get_price_history
    skill: database
    command: query
    args:
      sql: |
        SELECT platform, price, timestamp
        FROM price_history
        WHERE product_id = '{{input.product_id}}'
        AND timestamp > datetime('now', '-30 days')
        ORDER BY timestamp DESC

  # 3. 分析价格趋势
  - name: analyze_price_trend
    agent: data-analyst
    prompt: |
      分析以下商品价格数据：
      当前价格：{{steps.get_current_prices.output}}
      历史价格：{{steps.get_price_history.output}}

      请提供：
      1. 当前是否是好价（是/否/一般）
      2. 近30天最低价格及出现时间
      3. 价格趋势预测（上涨/下跌/稳定）
      4. 建议等待还是立即购买

  # 4. 获取用户评价
  - name: fetch_reviews
    skill: shopping-assistant
    command: fetch-reviews
    args:
      product:
        id: "{{input.product_id}}"

  # 5. 分析评价
  - name: analyze_reviews
    agent: review-analyzer
    prompt: |
      请分析以下商品评价：
      {{steps.fetch_reviews.output}}

  # 6. 生成购买建议
  - name: generate_recommendation
    agent: shopping-advisor
    prompt: |
      基于以下信息，为用户生成购买建议：

      产品：{{input.product_name}}
      预算：{{input.budget}}元
      用途：{{input.usage}}

      价格分析：{{steps.analyze_price_trend.output}}
      评价分析：{{steps.analyze_reviews.output}}

      请提供：
      1. 总体推荐等级（1-5星）
      2. 推荐理由
      3. 最佳购买渠道
      4. 注意事项或替代建议

  # 7. 发送通知
  - name: notify_user
    skill: notification
    command: send
    condition: "{{steps.analyze_price_trend.output.is_good_price}}"
    args:
      channel: "{{user.preferences.notification_channel}}"
      title: "价格提醒：{{input.product_name}}"
      content: "{{steps.generate_recommendation.output}}"
```

### 第四步：配置用户偏好

```yaml
# ~/.openclaw/config.yaml
shopping:
  watchlist:
    - name: "Sony A7M4 相机"
      id: "sony-a7m4"
      target_price: 14000
      platforms: ["jd", "tmall", "amazon"]
    - name: "MacBook Pro 14寸"
      id: "macbook-pro-14"
      target_price: 12000
      platforms: ["apple", "jd", "tmall"]

  preferences:
    notification_threshold: 0.05  # 价格下降5%时通知
    check_interval: "6h"
    preferred_platforms: ["jd", "tmall"]
```

## 实际案例

### 案例一：相机购买决策

摄影爱好者小陈想购买一台新相机，他使用 OpenClaw 进行全面的购买分析：

```yaml
# 触发分析
input:
  product_name: "Sony A7M4"
  product_id: "sony-ilce-7m4"
  budget: 15000
  usage: "人像摄影和旅行拍摄"

# 工作流执行结果示例
steps:
  analyze_price_trend:
    output: |
      价格分析结果：
      - 当前京东价格：14,999元
      - 近30天最低：14,299元（双11期间）
      - 当前溢价：约4.9%
      - 趋势预测：预计2周内可能降价至14,500左右
      - 建议：如不急需，可等待降价

  analyze_reviews:
    output: |
      评价分析（基于2,847条评价）：

      优点（高支持度）：
      - 对焦速度快，人眼识别准确
      - 高感表现优秀，ISO 12800可用
      - 电池续航比前代提升明显

      缺点（中支持度）：
      - 机身略重，长时间手持疲劳
      - 屏幕分辨率相比竞品偏低

      购买建议：强烈推荐

  generate_recommendation:
    output: |
      购买建议：
      ⭐⭐⭐⭐⭐ 强烈推荐

      这款相机非常适合您的人像和旅行需求。
      当前价格略高于近期低点，建议设置价格提醒，
      等待降至14,500元以下再入手。

      最佳渠道：京东自营（售后有保障）
      替代选择：如预算紧张，可考虑A7C2（更轻便）
```

### 案例二：智能比价机器人

小李经常在多个平台购物，他创建了一个比价机器人：

```yaml
name: price-comparison-bot

triggers:
  - type: command
    name: "/compare"

steps:
  - name: parse_input
    agent: intent-parser
    prompt: |
      从用户输入提取商品信息："{{input.message}}"
      输出JSON格式：{product_name, brand, model, specs}

  - name: search_all_platforms
    skill: shopping-assistant
    command: search-multi
    loop:
      over: ["jd", "tmall", "pdd", "amazon", "suning"]
      var: platform
    args:
      platform: "{{platform}}"
      query: "{{steps.parse_input.output.product_name}}"

  - name: format_comparison
    agent: formatter
    prompt: |
      将以下比价结果整理成表格：
      {{steps.search_all_platforms.output}}

      输出格式：
      | 平台 | 价格 | 优惠 | 配送 | 售后评分 |
      |------|------|------|------|----------|

      并在最后给出最佳购买建议。
```

### 案例三：防冲动消费助手

小张容易冲动消费，他设置了一个"冷静期"工作流：

```yaml
name: impulse-guardian

triggers:
  - type: webhook
    path: "/shopping/wishlist/add"

steps:
  - name: cooling_period
    delay: "72h"  # 72小时冷静期

  - name: re_evaluate
    agent: shopping-advisor
    prompt: |
      72小时前，用户将以下商品加入愿望清单：
      {{input.product}}

      请帮助用户重新评估购买需求：
      1. 这件商品解决了什么问题？
      2. 是否有现有物品可以替代？
      3. 如果现在不买，会有什么影响？
      4. 这笔支出是否符合用户的财务目标？

      请生成一份"购买前自检清单"。

  - name: send_reminder
    skill: notification
    command: send
    args:
      title: "冷静期提醒：{{input.product.name}}"
      content: |
        您72小时前关注了这件商品。

        {{steps.re_evaluate.output}}

        如果仍想购买，请点击确认。
        如果不再需要，它将自动从愿望清单移除。
```

## 进阶技巧

### 优惠券自动收集

```yaml
- name: collect_coupons
  skill: shopping-assistant
  command: scrape-coupons
  args:
    platforms: ["jd", "tmall"]
    categories: ["electronics", "home"]

- name: match_coupons
  agent: coupon-matcher
  prompt: |
    用户购物车：{{user.cart}}
    可用优惠券：{{steps.collect_coupons.output}}

    请计算最优使用方案，最大化优惠金额。
```

### 二手市场价格监控

```yaml
- name: track_secondhand
  skill: shopping-assistant
  command: monitor-secondhand
  args:
    platforms: ["xianyu", "zhuanzhuan"]
    product: "{{input.product}}"
    condition: "95新以上"
    max_price: "{{input.target_price * 0.7}}"
```

通过这些配置，OpenClaw 可以成为你的智能购物顾问，帮你省钱、避坑、做出更理性的消费决策。
