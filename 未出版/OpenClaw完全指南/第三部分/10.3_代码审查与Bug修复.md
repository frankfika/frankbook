---
section_id: 10.3
title: ä»£ç å®¡æŸ¥ä¸Bugä¿®å¤
status: draft
target_words: 2000
word_count: 2120
---

# ä»£ç å®¡æŸ¥ä¸Bugä¿®å¤

ä»£ç è´¨é‡æ˜¯è½¯ä»¶é¡¹ç›®çš„ç”Ÿå‘½çº¿ã€‚ä¼ ç»Ÿçš„ä»£ç å®¡æŸ¥ä¾èµ–äººå·¥æ£€æŸ¥ï¼Œä¸ä»…è€—æ—¶ï¼Œè€Œä¸”å®¹æ˜“é—æ¼é—®é¢˜ã€‚OpenClaw å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºä¸€ä¸ªæ™ºèƒ½ä»£ç å®¡æŸ¥åŠ©æ‰‹ï¼Œå®ç°è‡ªåŠ¨åŒ–çš„ä»£ç åˆ†æã€Bugæ£€æµ‹ã€å®‰å…¨æ¼æ´æ‰«æã€ä»£ç é£æ ¼æ£€æŸ¥ç­‰åŠŸèƒ½ï¼Œå¤§å¹…æå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚

## åœºæ™¯ä»‹ç»

### ä»£ç å®¡æŸ¥çš„æŒ‘æˆ˜

1. **å®¡æŸ¥è€—æ—¶**ï¼šäººå·¥ä»£ç å®¡æŸ¥å ç”¨å¤§é‡å¼€å‘æ—¶é—´
2. **æ ‡å‡†ä¸ç»Ÿä¸€**ï¼šä¸åŒå®¡æŸ¥è€…å¯¹ä»£ç è´¨é‡æ ‡å‡†çš„ç†è§£ä¸ä¸€è‡´
3. **é—®é¢˜é—æ¼**ï¼šå¤æ‚é€»è¾‘å’Œè¾¹ç•Œæ¡ä»¶å®¹æ˜“è¢«å¿½ç•¥
4. **çŸ¥è¯†ä¼ é€’å›°éš¾**ï¼šä»£ç å®¡æŸ¥æ˜¯å›¢é˜Ÿå­¦ä¹ çš„é‡è¦æœºä¼šï¼Œä½†éš¾ä»¥ç³»ç»ŸåŒ–
5. **å®‰å…¨éšæ‚£**ï¼šå®‰å…¨æ¼æ´å¾€å¾€éšè—åœ¨ä»£ç ç»†èŠ‚ä¸­ï¼Œéš¾ä»¥å‘ç°

### OpenClaw çš„è§£å†³æ–¹æ¡ˆ

- **è‡ªåŠ¨åŒ–åˆ†æ**ï¼šè‡ªåŠ¨æ£€æµ‹ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜
- **æ™ºèƒ½å»ºè®®**ï¼šåŸºäºä¸Šä¸‹æ–‡æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®
- **å®‰å…¨æ‰«æ**ï¼šè‡ªåŠ¨è¯†åˆ«å¸¸è§çš„å®‰å…¨æ¼æ´
- **çŸ¥è¯†åº“é›†æˆ**ï¼šå…³è”ç›¸å…³æ–‡æ¡£å’Œæœ€ä½³å®è·µ
- **å­¦ä¹ åé¦ˆ**ï¼šä»å®¡æŸ¥å†å²ä¸­å­¦ä¹ å›¢é˜Ÿçš„ä»£ç è§„èŒƒ

## å®ç°æ€è·¯

æ™ºèƒ½ä»£ç å®¡æŸ¥ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š

1. **ä»£ç è§£æå™¨**ï¼šè§£æå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ç»“æ„
2. **é™æ€åˆ†æå™¨**ï¼šæ£€æµ‹ä»£ç å¼‚å‘³ã€æ½œåœ¨Bugã€æ€§èƒ½é—®é¢˜
3. **å®‰å…¨æ‰«æå™¨**ï¼šè¯†åˆ«å®‰å…¨æ¼æ´å’Œåˆè§„é—®é¢˜
4. **é£æ ¼æ£€æŸ¥å™¨**ï¼šç¡®ä¿ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒ
5. **å®¡æŸ¥åŠ©æ‰‹**ï¼šç”Ÿæˆå®¡æŸ¥æ„è§å’Œä¿®å¤å»ºè®®

## é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä»£ç åˆ†æ Skill

```yaml
# ~/.openclaw/skills/code-review/SKILL.md
---
name: code-review-assistant
description: ä»£ç å®¡æŸ¥åŠ©æ‰‹
commands:
  - name: analyze-diff
    description: åˆ†æä»£ç å˜æ›´
    script: |
      # è·å– PR çš„ diff
      curl -s -H "Authorization: token {{secrets.github_token}}" \
        "https://api.github.com/repos/{{repo}}/pulls/{{pr_number}}/files" | \
        jq '.[] | {filename: .filename, status: .status, patch: .patch, additions: .additions, deletions: .deletions}'

  - name: run-linter
    description: è¿è¡Œä»£ç æ£€æŸ¥å·¥å…·
    script: |
      cd {{repo_path}}
      case "{{language}}" in
        python)
          pylint --output-format=json {{file_path}} 2>/dev/null || true
          flake8 --format=json {{file_path}} 2>/dev/null || true
          ;;
        javascript|typescript)
          eslint --format=json {{file_path}} 2>/dev/null || true
          ;;
        go)
          golint {{file_path}} 2>/dev/null || true
          go vet {{file_path}} 2>/dev/null || true
          ;;
      esac

  - name: run-security-scan
    description: è¿è¡Œå®‰å…¨æ‰«æ
    script: |
      cd {{repo_path}}
      # ä½¿ç”¨ bandit æ‰«æ Python ä»£ç 
      if [ "{{language}}" = "python" ]; then
        bandit -f json -r {{file_path}} 2>/dev/null || true
      fi
      # ä½¿ç”¨ semgrep è¿›è¡Œå¤šè¯­è¨€æ‰«æ
      semgrep --config=auto --json {{file_path}} 2>/dev/null || true

  - name: post-review-comment
    description: æäº¤å®¡æŸ¥æ„è§
    script: |
      curl -s -X POST \
        -H "Authorization: token {{secrets.github_token}}" \
        -H "Accept: application/vnd.github.v3+json" \
        "https://api.github.com/repos/{{repo}}/pulls/{{pr_number}}/reviews" \
        -d '{
          "body": "{{review_body}}",
          "event": "{{event}}",
          "comments": {{comments | to_json}}
        }'

  - name: create-fix-branch
    description: åˆ›å»ºä¿®å¤åˆ†æ”¯
    script: |
      cd {{repo_path}}
      git checkout -b "fix/{{issue_id}}-{{timestamp}}"
      # åº”ç”¨ä¿®å¤
      echo "{{fix_code}}" > {{file_path}}
      git add {{file_path}}
      git commit -m "fix: {{fix_description}}"
      git push origin "fix/{{issue_id}}-{{timestamp}}"
```

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä»£ç å®¡æŸ¥ Agent

```yaml
# ~/.openclaw/agents/code-reviewer.yaml
name: code-reviewer
description: ä»£ç å®¡æŸ¥ä¸“å®¶
system_prompt: |
  ä½ æ˜¯ä¸€ä½èµ„æ·±çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ä»£ç å®¡æŸ¥å’Œè´¨é‡ä¿è¯ã€‚

  å®¡æŸ¥ç»´åº¦ï¼š
  1. ä»£ç æ­£ç¡®æ€§ï¼šé€»è¾‘é”™è¯¯ã€è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸å¤„ç†
  2. ä»£ç é£æ ¼ï¼šå‘½åè§„èŒƒã€ä»£ç æ ¼å¼ã€æ³¨é‡Šè´¨é‡
  3. æ€§èƒ½ä¼˜åŒ–ï¼šç®—æ³•å¤æ‚åº¦ã€èµ„æºä½¿ç”¨ã€ç¼“å­˜ç­–ç•¥
  4. å®‰å…¨æ€§ï¼šæ³¨å…¥æ”»å‡»ã€æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€æƒé™æ§åˆ¶
  5. å¯ç»´æŠ¤æ€§ï¼šä»£ç ç»“æ„ã€é‡å¤ä»£ç ã€å¤æ‚åº¦
  6. æµ‹è¯•è¦†ç›–ï¼šå•å…ƒæµ‹è¯•ã€è¾¹ç•Œæµ‹è¯•ã€å¼‚å¸¸æµ‹è¯•

  å®¡æŸ¥åŸåˆ™ï¼š
  - æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®ï¼Œè€Œéæ¨¡ç³Šæ‰¹è¯„
  - è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ä¿®æ”¹ï¼Œå¸®åŠ©å¼€å‘è€…æˆé•¿
  - åŒºåˆ†é˜»å¡æ€§é—®é¢˜å’Œå»ºè®®æ€§æ”¹è¿›
  - è®¤å¯å¥½çš„ä»£ç å®è·µ

  è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰ï¼š
  {
    "summary": "å®¡æŸ¥æ‘˜è¦",
    "issues": [
      {
        "severity": "error|warning|info",
        "category": "correctness|style|performance|security|maintainability",
        "file": "æ–‡ä»¶è·¯å¾„",
        "line": è¡Œå·,
        "message": "é—®é¢˜æè¿°",
        "suggestion": "æ”¹è¿›å»ºè®®",
        "example": "ä»£ç ç¤ºä¾‹"
      }
    ],
    "positive_feedback": ["å€¼å¾—è‚¯å®šçš„åœ°æ–¹"],
    "overall_assessment": "æ€»ä½“è¯„ä»·"
  }
```

### ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ä»£ç å®¡æŸ¥å·¥ä½œæµ

```yaml
# ~/.openclaw/workflows/code-review.lobster
name: code-review
version: "1.0"

triggers:
  - type: webhook
    path: "/github/pull-request"
    condition: "{{event.action == 'opened' or event.action == 'synchronize'}}"

steps:
  # 1. è·å–ä»£ç å˜æ›´
  - name: fetch_diff
    skill: code-review-assistant
    command: analyze-diff
    args:
      repo: "{{event.repository.full_name}}"
      pr_number: "{{event.pull_request.number}}"

  # 2. è¿è¡Œé™æ€åˆ†æ
  - name: run_static_analysis
    skill: code-review-assistant
    command: run-linter
    loop:
      over: "{{steps.fetch_diff.output}}"
      condition: "{{item.status != 'removed'}}"
    args:
      repo_path: "/tmp/repos/{{event.repository.name}}"
      file_path: "{{item.filename}}"
      language: "{{item.filename | detect_language}}"

  # 3. è¿è¡Œå®‰å…¨æ‰«æ
  - name: run_security_scan
    skill: code-review-assistant
    command: run-security-scan
    loop:
      over: "{{steps.fetch_diff.output}}"
      condition: "{{item.status != 'removed'}}"
    args:
      repo_path: "/tmp/repos/{{event.repository.name}}"
      file_path: "{{item.filename}}"
      language: "{{item.filename | detect_language}}"

  # 4. AI ä»£ç å®¡æŸ¥
  - name: ai_code_review
    agent: code-reviewer
    loop:
      over: "{{steps.fetch_diff.output}}"
      condition: "{{item.status != 'removed' and item.additions > 0}}"
    prompt: |
      è¯·å®¡æŸ¥ä»¥ä¸‹ä»£ç å˜æ›´ï¼š

      æ–‡ä»¶ï¼š{{item.filename}}
      å˜æ›´ï¼š
      ```diff
      {{item.patch}}
      ```

      é¡¹ç›®ä¸Šä¸‹æ–‡ï¼š
      - è¯­è¨€ï¼š{{item.filename | detect_language}}
      - æ¡†æ¶ï¼š{{repo.framework}}
      - å›¢é˜Ÿè§„èŒƒï¼š{{team.coding_standards}}

      è¯·æä¾›è¯¦ç»†çš„å®¡æŸ¥æ„è§ã€‚

  # 5. æ±‡æ€»å®¡æŸ¥ç»“æœ
  - name: consolidate_review
    agent: code-reviewer
    prompt: |
      æ±‡æ€»ä»¥ä¸‹å®¡æŸ¥ç»“æœï¼Œç”Ÿæˆæ•´ä½“è¯„ä»·ï¼š

      é™æ€åˆ†æç»“æœï¼š
      {{steps.run_static_analysis.output}}

      å®‰å…¨æ‰«æç»“æœï¼š
      {{steps.run_security_scan.output}}

      AI å®¡æŸ¥ç»“æœï¼š
      {{steps.ai_code_review.output}}

      è¯·ç”Ÿæˆï¼š
      1. å®¡æŸ¥æ‘˜è¦
      2. æŒ‰ä¸¥é‡ç¨‹åº¦æ’åºçš„é—®é¢˜åˆ—è¡¨
      3. ä¿®å¤ä¼˜å…ˆçº§å»ºè®®
      4. æ€»ä½“è¯„ä»·ï¼ˆé€šè¿‡/éœ€ä¿®æ”¹/æ‹’ç»ï¼‰

  # 6. æäº¤å®¡æŸ¥æ„è§
  - name: post_review
    skill: code-review-assistant
    command: post-review-comment
    args:
      repo: "{{event.repository.full_name}}"
      pr_number: "{{event.pull_request.number}}"
      review_body: "{{steps.consolidate_review.output.summary}}"
      event: |
        {% if steps.consolidate_review.output.has_blocking_issues %}
          REQUEST_CHANGES
        {% else %}
          COMMENT
        {% endif %}
      comments: "{{steps.consolidate_review.output.issues | format_review_comments}}"

  # 7. åˆ›å»ºä¿®å¤å»ºè®®ï¼ˆå¯é€‰ï¼‰
  - name: suggest_fixes
    agent: code-reviewer
    condition: "{{steps.consolidate_review.output.can_auto_fix}}"
    prompt: |
      ä¸ºä»¥ä¸‹é—®é¢˜ç”Ÿæˆè‡ªåŠ¨ä¿®å¤ä»£ç ï¼š
      {{steps.consolidate_review.output.auto_fixable_issues}}

      è¯·æä¾›å¯ç›´æ¥åº”ç”¨çš„ä»£ç ä¿®æ”¹ã€‚

  - name: create_fix_pr
    skill: code-review-assistant
    command: create-fix-branch
    condition: "{{steps.suggest_fixes.output.has_fixes}}"
    args:
      repo_path: "/tmp/repos/{{event.repository.name}}"
      issue_id: "{{event.pull_request.number}}"
      fix_code: "{{steps.suggest_fixes.output.fixed_code}}"
      fix_description: "Auto-fix code review issues"
```

### ç¬¬å››æ­¥ï¼šé…ç½®å®¡æŸ¥è§„åˆ™

```yaml
# ~/.openclaw/config.yaml
code_review:
  enabled: true
  auto_review: true
  rules:
    # ä»£ç é£æ ¼
    style:
      max_line_length: 100
      require_docstrings: true
      naming_conventions:
        python: "snake_case"
        javascript: "camelCase"

    # å¤æ‚åº¦
    complexity:
      max_function_lines: 50
      max_cyclomatic_complexity: 10
      max_cognitive_complexity: 15

    # å®‰å…¨
    security:
      check_sql_injection: true
      check_xss: true
      check_secrets: true
      banned_functions:
        python: ["eval", "exec", "pickle.loads"]
        javascript: ["eval", "Function", "setTimeout(string)"]

    # æ€§èƒ½
    performance:
      detect_n_plus_1: true
      detect_memory_leaks: true
      suggest_caching: true

  ignore_patterns:
    - "**/migrations/**"
    - "**/vendor/**"
    - "**/*.min.js"
    - "**/test_*.py"

  notification:
    on_blocking_issue: true
    channel: "slack"
    channel_id: "#code-reviews"
```

## å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹ä¸€ï¼šPython é¡¹ç›®ä»£ç å®¡æŸ¥

å¼€å‘å›¢é˜Ÿä½¿ç”¨ OpenClaw è‡ªåŠ¨å®¡æŸ¥ Python ä»£ç ï¼š

```yaml
# PR è§¦å‘å®¡æŸ¥
input:
  repository: "company/project-api"
  pr_number: 234
  changed_files:
    - "src/services/user_service.py"
    - "src/models/user.py"
    - "tests/test_user_service.py"

# å®¡æŸ¥ç»“æœç¤ºä¾‹
steps:
  ai_code_review:
    output: |
      æ–‡ä»¶ï¼šsrc/services/user_service.py

      é—®é¢˜ 1ï¼ˆä¸¥é‡ç¨‹åº¦ï¼šerrorï¼‰ï¼š
      - ä½ç½®ï¼šç¬¬ 45 è¡Œ
      - é—®é¢˜ï¼šSQL æ³¨å…¥é£é™©
      - ä»£ç ï¼šquery = f"SELECT * FROM users WHERE id = {user_id}"
      - å»ºè®®ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
      - ä¿®å¤ï¼š
        ```python
        query = "SELECT * FROM users WHERE id = %s"
        cursor.execute(query, (user_id,))
        ```

      é—®é¢˜ 2ï¼ˆä¸¥é‡ç¨‹åº¦ï¼šwarningï¼‰ï¼š
      - ä½ç½®ï¼šç¬¬ 78-120 è¡Œ
      - é—®é¢˜ï¼šå‡½æ•°è¿‡é•¿ï¼ˆ43è¡Œï¼‰ï¼Œå»ºè®®æ‹†åˆ†
      - å»ºè®®ï¼šå°†éªŒè¯é€»è¾‘ã€æ•°æ®åº“æ“ä½œã€å“åº”æ„å»ºæ‹†åˆ†ä¸ºç‹¬ç«‹å‡½æ•°

      é—®é¢˜ 3ï¼ˆä¸¥é‡ç¨‹åº¦ï¼šinfoï¼‰ï¼š
      - ä½ç½®ï¼šç¬¬ 15 è¡Œ
      - é—®é¢˜ï¼šç¼ºå°‘å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²
      - å»ºè®®ï¼šæ·»åŠ  docstring è¯´æ˜å‡½æ•°ç”¨é€”ã€å‚æ•°ã€è¿”å›å€¼

      å€¼å¾—è‚¯å®šï¼š
      - è‰¯å¥½çš„å¼‚å¸¸å¤„ç†
      - é€‚å½“çš„æ—¥å¿—è®°å½•
      - æµ‹è¯•è¦†ç›–ç‡è¾ƒé«˜

  consolidate_review:
    output: |
      ## ä»£ç å®¡æŸ¥æŠ¥å‘Š

      **æ€»ä½“è¯„ä»·**ï¼šéœ€è¦ä¿®æ”¹ï¼ˆå‘ç°é˜»å¡æ€§é—®é¢˜ï¼‰

      **é—®é¢˜ç»Ÿè®¡**ï¼š
      - é”™è¯¯ï¼š1ä¸ªï¼ˆå®‰å…¨é—®é¢˜ï¼‰
      - è­¦å‘Šï¼š2ä¸ª
      - å»ºè®®ï¼š3ä¸ª

      **å¿…é¡»ä¿®å¤**ï¼š
      1. SQL æ³¨å…¥æ¼æ´ï¼ˆç¬¬45è¡Œï¼‰- å®‰å…¨é£é™©

      **å»ºè®®ä¿®å¤**ï¼š
      1. æ‹†åˆ†è¿‡é•¿å‡½æ•°
      2. è¡¥å……æ–‡æ¡£å­—ç¬¦ä¸²
      3. ä¼˜åŒ–å¯¼å…¥é¡ºåº

      **ä¿®å¤åè¯·é‡æ–°æäº¤å®¡æŸ¥ã€‚**
```

### æ¡ˆä¾‹äºŒï¼šBug è‡ªåŠ¨ä¿®å¤

ç³»ç»Ÿæ£€æµ‹åˆ°å¸¸è§ Bug æ¨¡å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆä¿®å¤ï¼š

```yaml
name: auto-bug-fix

triggers:
  - type: schedule
    cron: "0 2 * * *"  # æ¯å¤©å‡Œæ™¨2ç‚¹

steps:
  - name: scan_codebase
    skill: code-review-assistant
    command: run-linter
    args:
      repo_path: "{{repo.path}}"
      check_all: true

  - name: identify_fixable_issues
    agent: code-reviewer
    prompt: |
      åˆ†æä»¥ä¸‹ä»£ç é—®é¢˜ï¼Œè¯†åˆ«å¯ä»¥è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ï¼š
      {{steps.scan_codebase.output}}

      å¯è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ç±»å‹ï¼š
      - ä»£ç æ ¼å¼é—®é¢˜
      - æœªä½¿ç”¨çš„å¯¼å…¥
      - ç®€å•çš„å‘½åè§„èŒƒé—®é¢˜
      - æ˜æ˜¾çš„è¯­æ³•æ”¹è¿›

  - name: generate_fixes
    agent: code-reviewer
    loop:
      over: "{{steps.identify_fixable_issues.output.auto_fixable}}"
    prompt: |
      ä¸ºä»¥ä¸‹é—®é¢˜ç”Ÿæˆä¿®å¤ä»£ç ï¼š
      æ–‡ä»¶ï¼š{{item.file}}
      é—®é¢˜ï¼š{{item.message}}
      å½“å‰ä»£ç ï¼š
      ```{{language}}
      {{item.code_snippet}}
      ```

      è¯·æä¾›ä¿®å¤åçš„ä»£ç ã€‚

  - name: apply_fixes
    skill: code-review-assistant
    command: create-fix-branch
    args:
      repo_path: "{{repo.path}}"
      issue_id: "auto-fix-{{date}}"
      fix_code: "{{steps.generate_fixes.output}}"
      fix_description: "Automated code style fixes"

  - name: create_pr
    skill: github
    command: create-pull-request
    args:
      title: "[Auto] Code style fixes"
      body: |
        æ­¤ PR åŒ…å«è‡ªåŠ¨ä¿®å¤çš„ä»£ç é£æ ¼é—®é¢˜ï¼š
        {{steps.identify_fixable_issues.output.summary}}

        è¯·å®¡æŸ¥ååˆå¹¶ã€‚
      base: "main"
      head: "fix/auto-fix-{{date}}"
```

### æ¡ˆä¾‹ä¸‰ï¼šå®‰å…¨æ¼æ´æ‰«æ

å®‰å…¨å›¢é˜Ÿä½¿ç”¨ OpenClaw è¿›è¡Œè‡ªåŠ¨åŒ–å®‰å…¨å®¡æŸ¥ï¼š

```yaml
name: security-scan

triggers:
  - type: webhook
    path: "/github/pull-request"
  - type: schedule
    cron: "0 0 * * *"  # æ¯å¤©æ‰«æ

steps:
  - name: run_security_checks
    skill: code-review-assistant
    command: run-security-scan
    args:
      repo_path: "{{repo.path}}"
      scan_type: "full"

  - name: analyze_vulnerabilities
    agent: security-analyst
    prompt: |
      åˆ†æä»¥ä¸‹å®‰å…¨æ‰«æç»“æœï¼š
      {{steps.run_security_checks.output}}

      è¯·è¯„ä¼°ï¼š
      1. æ¼æ´ä¸¥é‡ç¨‹åº¦ï¼ˆCVSSè¯„åˆ†ï¼‰
      2. å¯åˆ©ç”¨æ€§
      3. å½±å“èŒƒå›´
      4. ä¿®å¤ä¼˜å…ˆçº§
      5. ä¿®å¤å»ºè®®

  - name: notify_security_team
    skill: notification
    command: send
    condition: "{{steps.analyze_vulnerabilities.output.has_critical}}"
    args:
      channel: "slack"
      recipient: "#security-alerts"
      title: "ğŸš¨ å‘ç°ä¸¥é‡å®‰å…¨æ¼æ´"
      content: |
        ä»“åº“ï¼š{{repo.name}}
        æ¼æ´æ•°ï¼š{{steps.analyze_vulnerabilities.output.critical_count}} ä¸¥é‡

        è¯¦æƒ…ï¼š
        {{steps.analyze_vulnerabilities.output.critical_vulnerabilities}}

        è¯·ç«‹å³å¤„ç†ï¼

  - name: create_security_ticket
    skill: jira
    command: create-issue
    loop:
      over: "{{steps.analyze_vulnerabilities.output.vulnerabilities}}"
      condition: "{{item.severity in ['high', 'critical']}}"
    args:
      project: "SEC"
      issue_type: "Security Bug"
      summary: "[{{item.severity}}] {{item.title}}"
      description: |
        æ¼æ´è¯¦æƒ…ï¼š
        {{item.description}}

        ä½ç½®ï¼š{{item.file}}:{{item.line}}

        ä¿®å¤å»ºè®®ï¼š
        {{item.remediation}}
```

## è¿›é˜¶æŠ€å·§

### ä»£ç å®¡æŸ¥çŸ¥è¯†åº“

```yaml
- name: check_best_practices
  skill: knowledge-base
  command: query
  args:
    query: "{{code_pattern}} best practices {{language}}"

- name: suggest_pattern
  agent: code-reviewer
  prompt: |
    åŸºäºä»¥ä¸‹ä»£ç å’Œæœ€ä½³å®è·µï¼Œæä¾›æ›´ä¼˜çš„å®ç°æ–¹æ¡ˆï¼š
    å½“å‰ä»£ç ï¼š{{current_code}}
    æœ€ä½³å®è·µï¼š{{steps.check_best_practices.output}}

    è¯·æä¾›æ”¹è¿›åçš„ä»£ç ç¤ºä¾‹ã€‚
```

### å­¦ä¹ å›¢é˜Ÿé£æ ¼

```yaml
- name: analyze_team_patterns
  skill: code-review-assistant
  command: analyze-history
  args:
    repo: "{{repo.name}}"
    lookback: "90d"

- name: learn_preferences
  agent: code-reviewer
  prompt: |
    åˆ†æå›¢é˜Ÿå†å²ä»£ç å®¡æŸ¥æ•°æ®ï¼Œå­¦ä¹ å®¡æŸ¥åå¥½ï¼š
    {{steps.analyze_team_patterns.output}}

    è¯·æ€»ç»“ï¼š
    1. å›¢é˜Ÿç‰¹åˆ«å…³æ³¨çš„é—®é¢˜ç±»å‹
    2. å¸¸ç”¨çš„ä»£ç æ¨¡å¼
    3. å®¡æŸ¥æ ‡å‡†çš„ä¸¥æ ¼ç¨‹åº¦
    4. ä¸ªäººåŒ–çš„å®¡æŸ¥å»ºè®®
```

é€šè¿‡è¿™äº›é…ç½®ï¼ŒOpenClaw å¯ä»¥æˆä¸ºä½ çš„æ™ºèƒ½ä»£ç å®¡æŸ¥åŠ©æ‰‹ï¼Œå¸®åŠ©å›¢é˜Ÿä¿æŒé«˜è´¨é‡çš„ä»£ç æ ‡å‡†ï¼ŒåŒæ—¶å‡è½»å¼€å‘è€…çš„å®¡æŸ¥è´Ÿæ‹…ã€‚
